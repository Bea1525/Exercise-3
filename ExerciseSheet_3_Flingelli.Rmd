---
title: "Exercise #3"
subtitle: "Fortgeschrittene Statistische Software für Nebenfachstudierende"
author: "Beatrice Maria Flingelli (12722372)"
date: "`r Sys.Date()`"
output: distill::distill_article
---


## Exercise 1: Initializing git (4 Points)

For this whole exercise sheet we will be tracking all our changes to it
in git.

a)  Start by initializing a new R project with git support, called
    `2025-exeRcise-sheet-3`. If you forgot how to do this, you can
    follow this
    [guide](https://malikaihle.github.io/Introduction-RStudio-Git-GitHub/rstudio_project.html).

- Done    

b)  Commit the files generated by Rstudio.

- Done

c)  For all of the following tasks in this exercise sheet we ask you to
    always commit your changes after finishing each subtask e.g. create
    a commit after task *1d*, *1e* etc.

> Note: This applies only to answers that have text or code as their
> answer. If you complete tasks in a different order or forget to commit
> one, this is no problem. If you change your answers you can just
> create multiple commits to track the changes.

d)  Name 2 strengths and 2 weaknesses of git. (Don't forget to create a
    commit after this answer, see *1c*)
  
### Strengths 
- Git provides a history, which allows tracking down changes that have been made. This is great for troubleshooting and identifying the authors who worked on the project. 
- Git prevents one from losing a file and its previous changes. 

### Weaknesses 
- Git struggles with large (especially non-text or non-code) files. So it may become slower with larger files 
- Git does not simply run in the background automatically but needs to be used actively Otherwise changes will not be saved.

e)  Knit this exercise sheet. Some new files will automatically be
    generated when knitting the sheet e.g. the HTML page. Ignore these
    files, as we only want to track the source files themselves. You
    can, but don't need to create a `.gitignore` file. Just do not
    commit these files manually.



## Exercise 2: Putting your Repository on GitHub (3 Points)

For this task you will upload your solution to GitHub.

a)  Create a new repository on GitHub in your account named
    `exeRcise-sheet-3`. Make sure you create a **public repository** so
    we are able to see it for grading. Add the link to the repository
    below:
    
You can find the repository [here](https://github.com/Bea1525/Exercise-3.git)
    
b)  Push your code to this new repository by copying and executing the
    snippet on github listed under
    `…or push an existing repository from the command line`.
    
- Done 

c)  Regularly push your latest changes to GitHub again and especially do
    so when you are finished with this sheet.
    



## Exercise 3: Pixar Films (4 Points)

Download the `pixar_films` and `public_response` datasets from the
GitHub repository and track them in git.

Link:
<https://github.com/rfordatascience/tidytuesday/tree/main/data/2025/2025-03-11>

For small datasets like these adding them to git is not a problem.

a)  Load the `pixar_films` dataset into R. Clean the dataset by removing
    films without a title. Inspect the variable `film_rating`. What are
    the possible values and what do they mean? Create a factor variable
    for the film rating. Why is this appropriate?

```{r}
library(tidyverse)
pix <- read_csv("data/pixar_films.csv")
```

```{r}
pix <- pix %>% filter(!is.na(film))
```

- Looking in the data dictionary on GitHub, shows that the `film_rating` variable is an age recommendation based on a system by the Motion Picture Association. So I simply looked up the MPA's rating system online and apparently G stands for "General Audience" and PG means "Parental Guidance Suggested". So a movie labeled with G is meant to be for all ages and has no restrictions, whereas a movie labeled with PG may not be suitable for young children. 

```{r}
pix$film_rating <- as.factor(pix$film_rating)

is.factor(pix$film_rating)
```

- The variable is now considered to be a factor variable. This is possible because the values in film_rating are categorized and divided into groups. Furthermore, the values only appear in a limited number (2 groups) and allthough they are categorical they can be represented by numbers for computational purposes.


b)  Inspect the film titles manually. Which films form a film series? A
    film series can be identified by a common word in the titles of the
    films, often in conjunction with a number in the title,
    e.g. "Despicable Me" and "Despicable Me 2". Create a dataframe which
    displays a list of the different series with the titles of the films
    and how many films belong to the series. Output the dataframe.
    
```{r}
pix_series <- pix %>% filter(film == contains("1", "2", "3", "4"))
```
    

c)  Load the `public_response` dataframe into R. Convert the
    `cinema_score` variable into a factor while ensuring the factor
    levels are defined in ascending order, from the lowest to the
    highest score. Combine `public_response` with the `pixar_films`
    dataset using an appropriate merge variable.
    
```{r}
pub <- read_csv("data/public_response.csv")
```
   
```{r}
# Only execcute this chunk once (idk why but this keeps everything fine)
pub <- pub %>% mutate(cinema_score = recode(cinema_score,
                                            "A-" = 1,
                                            "A" = 2,
                                            "A+" = 3)) %>% 
               filter(!is.na(cinema_score)) %>% 
               arrange(cinema_score)
```

```{r}
pub$cinema_score <- as.factor(pub$cinema_score)
is.factor(pub$cinema_score)
```

- Note: I chose to recode the charakters to numbers, so it is easier to arrange them in an ascending order. (A- = 1, A = 2, A+ = 3)

```{r}
pub_pix_mix <- inner_join(pix, pub, by = "film")
```


d)  Choose one of the variables representing the public response and
    create a bar plot for the films belonging to a series. Here are the
    details of the plot:

    -   The film series are represented on the x-axis.
    -   Your chosen public response variable is displayed on the y-axis.
    -   Each film in the series is represented as a separate bar. Bars
        are grouped by film under their respective series on the x-axis.
        Order the bars within a series according to the release date of
        the films.
    -   A title and axis labels for context.

    What do you notice when comparing the scores of the films in a
    series? Do you see any patterns?
    
```{r}
pub_pix_mix %>% ggplot(aes(
  x = series,
  y = rotten_tomatoes
) + 
  geom_bar(stat = "identity", position = "dodge") +
  facet_wrap(~ film) + 
  labs(
    title = "Reviews on Pixar film series",
    subtitle = "Rating by rotten tomatoes users on a score from 1 to 100",
    x = "Film Series",
    y = "Score",
    caption = "Source: Data provided on Wikipedia (https://en.wikipedia.org/wiki/List_of_Pixar_films)"
  ) 
  
)
```

    
- I notice ...



## Exercise 4: Open Analysis (4 points)

This exercise is a bit more open-ended. You can choose any dataset from
[Our World in Data](https://ourworldindata.org/) and analyze it, while
determining the research question yourself.

a)  Go to <https://github.com/owid/owid-datasets/tree/master/datasets>
    and choose a dataset that interests you. You can have a look at
    <https://ourworldindata.org/> to gather some inspiration.
    
- Done

b)  Download the dataset and track it in git.

- Done

c)  Put the name / title of the dataset and a link to it below.

-   Dataset Name: Alcohol consumption by type since 1890
-   Link: <>https://github.com/owid/owid-datasets/tree/6155d4ca1ea14ef30e753010a25521eeb416e8a2/datasets/Alcohol%20consumption%20by%20type%20since%201890%20(Alexander%20%26%20Holmes%2C%202017)

d)  Come up with a (research) question you want to answer with the data
    and briefly explain why you believe this is an interesting question
    within one sentence. It should be a question that can be answered
    with the dataset and using R.
    
- What is the globally most preferred alcoholic beverage and to which time and country
was the most of each alcoholic beverage consumed? 


e)  Use R to answer your chosen question. Please limit your analysis to
    the functions and techniques we have covered so far in the course.
    You are **not expected** to use advanced statistical models or
    external packages which haven't been introduced.
    
```{r}
alc <- read_csv("data/Alcohol consumption by type since 1890 (Alexander & Holmes, 2017).csv")
```
    
```{r}
alc %>% summarise(Wine = mean(`Wine (% total alcohol)`),
                  Beer = mean(`Beer (% total alcohol)`),
                  Spirits = mean (`Spirits (% total alcohol)`))
```
```{r}
alc %>% arrange(desc(`Wine (% total alcohol)`))
alc %>% arrange(desc(`Beer (% total alcohol)`))
alc %>% arrange(desc(`Spirits (% total alcohol)`))
```

- On average, in most countries, about 42% of all beverages consumed are some kinds of beer. Wine is almost equally much consumed as spirits: about 28.1% of average wine consumption and about 28.5% of average spirits consumption.

- The highest wine consumption was generally observed in Italy. In the year 1890, about 95% of all alcohol consumption was wine. This peak is repeatedly observed in 1929. Thirtyfive years later, a slight decrease can be seen with 87% of wine consumption. This being said, Italy takes the top 2 places in wine consumption, closely being followed by France in the year 1929.

The highest beer consumption was observed in Belgium in 1929 and in the United Kingdom in 1964. Both share an average beer consumption of 81% of all alcoholic baverage consumption.

Last but not least, the highest spirits consumption was observed in Japan in 1964. About 78% of all consumed alcoholic beverages were spirits. And Japan seems to keep this trend: in the year 2014, a similar number has been observed (74%). This is closely followed by the Netherlands with 71% in 1890.


f)  Create a meaningful plot / figure with the dataset. Make sure to
    provide a figure caption (via the chunk options / Rmarkdown) and
    correctly label the figure.
    
```{r}
top_alc <- alc %>% pivot_longer(cols = c(`Wine (% total alcohol)`, 
                                         `Beer (% total alcohol)`, 
                                         `Spirits (% total alcohol)`), 
                                names_to = "Beverage",
                                values_to = "Percentage")

top_alc <- top_alc %>% group_by(Beverage) %>%
                       slice_max(Percentage, n = 5) %>%
                       ungroup() %>%
                       arrange(Beverage, desc(Percentage)) 
```

```{r graph1, fig.cap="Comparison of wine consumption for each country"}
top_alc %>% ggplot(aes(
  x = Percentage,
  y = Entity,
  fill = Beverage
)) + geom_col(position = "dodge") +
  facet_wrap(~ Beverage)
  
```
    

## Final Note

Make sure to push all your commits and changes to GitHub before
submitting the exercise sheet.
